enum ServiceType{
    ROUTER
    DB
}

type Service{
    id:ID
    id_server:ID
    alias:String
    dns:String
    port:Int
    type:ServiceType
}
type Server{
    id:ID 
    id_site:ID   
    alias:String
    dns:String
    ipv4:String 
    services(filter:JSON):[Service] @connect(key:"id" model:"service" modelKey:"id_server")
}
enum SiteProvider{
    LINODE
}
type Site{
    id:ID
    alias:String
    provider:SiteProvider
    region:String
    servers(filter:JSON):[Server] @connect(key:"id" model:"server" modelKey:"id_site")
}
extend type Query{
sites_find(filter:JSON):[Site] @connect(model:"site")
}

input Site_Insert{
    alias:String
    provider:SiteProvider
    region:String
}
input Site_Update{
    id:ID!
    alias:String
    provider:SiteProvider
    region:String
}
extend type Mutation{
"You can insert multiples documents data:[doc1,doc2,...etc] or data:{oneDoc}"
sites_insert(data:[Site_Insert]):JSON @insert(model:"site")
"You can update multiples documents data:[doc1,doc2,...etc] or data:{oneDoc}"
sites_update(data:[Site_Update]):JSON @updateById(model:"site")
}
